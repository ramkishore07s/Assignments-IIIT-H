<% provide(:title, "Log in") %>
<div style="float:right">
    <h3>Or SignIn with<br/> </h3>
    <div class="g-signin2" data-onsuccess="onSignIn"></div>
   
</div>
<h1>Log in</h1>

<div class="row">
    <div class="col-md-6 col-md-offset-3">
	<%= form_for(:session, url: login_path) do |f| %>

	    <%= f.label :email %>
	    <%= f.email_field :email, class: 'form-control' %>

	    <%= f.label :password %>
	    <%= f.password_field :password, class: 'form-control' %>

	    <%= f.submit "Log in", class: "btn btn-primary" %>
	<% end %>

    </div>
</div>
<div class="row" style="display:none">
    <div class="col-md-6 col-md-offset-3">
	<%= form_for(:session, url: google_path, :html => {:id => "googlesign"}) do |f| %>

	    <%= f.label :email %>
	    <%= f.email_field :emaila, class: 'form-control' %>

	    <%= f.submit "Log in", class: "btn btn-primary" %>
	<% end %>

	
    </div>
</div>

<script>
 function onSignIn(googleUser) {
     var profile = googleUser.getBasicProfile();
     console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
     console.log('Name: ' + profile.getName());
     console.log('Image URL: ' + profile.getImageUrl());
     console.log('Email: ' + profile.getEmail()); // This is null if the 'email' scope is not present.
     signOut();
     document.getElementById("session_emaila").value=profile.getEmail();
     document.getElementById("googlesign").submit();
     
 }
</script>
<p>New user? <%= link_to "Sign up now!", signup_path %></p>
